# Ego network analysis

In this section will discuss a way of creating *ego-networks* based on

## Concepts

Given a user $u$, let's define:

- $O(u)$: Others of $u$. The set of users that receive 2 or more retweets from $u$.
- $R_u(o)$: Number of retweets that receives a users $o\in O(u)$ from $u$
- $P(R_u)=P(\{ R_u(o), \forall o \in O(u)\})$: Empiric distribution of $R_u(o)$ for all $o\in O(u)$.
- $O_s(u)=\{o\in O(u)| R_u(o)\in \text{Outliers}(P)\}\sub O(u)$: Significative others of $u$. The subset of users for which its number of retweets from $u$ represents an outlier of the $P(R_u)$ distribution

<figure style="text-align:center">
    <iframe frameborder="0" style="width:100%;height:400px;" src="https://app.diagrams.net/?lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=EgoNetwork.drawio#Uhttps%3A%2F%2Fdrive.google.com%2Fuc%3Fid%3D13_1OP3DQnsCCYWEf-_Nvcd80MBNHQ6kb%26export%3Ddownload"></iframe>
<figcaption>Fig.1 - Schema of ego-network.</figcaption>
</figure>

The significative others set ($O_s$) are the users that receive a significant larger amount of retweets than the others. Could be that the significative others set is empty, and thus we haven't an ego network for that given user. The distribution $P$ is often very skewed, that's why we consider only

For the definition of $\text{Outliers}$ we will use what is stated in the paper [1], that introduces the skewness into the measurement of the outliers. With 
$$
Q_i := i\text{th quartile P} \\
IQR:=Q_3-Q_1\\
MC := \text{Medcouple(P)}
$$
We define:

$$
\text{Outliers}(P)=\{x|x\notin[Q_1 − h_l(MC) IQR; Q_3 + h_u(MC) IQR]\}\\
h_l(MC) = 1.5e^{3MC}\\
h_u(MC) = 1.5e^{-4MC}
$$
In our case we'll only use the upper bound, as we have a right long tail, with the most frequently retweeted profiles in the right.

## Timeline networks analysis

We'll construct a significant ego network for each timeline of all users, and we'll look at overall properties of all the ego-networks generated by our users. As we don't have a balanced number of users for each type, we'll have to do some bootstrapping in order to compare the distributions. That means that we will pick a random subsample of the distribution of the same size for each user group, compare among them and compute the mean of the comparations, for every aspect of 

### Degree

- Description

<figure style="text-align:center">
    <iframe height='520' scrolling='no' src='../tfm-plots/networks-degree-type.html' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 99.99%;'>	</iframe>
    <figcaption>Fig.1 - Degree of the ego-network by type.</figcaption>
</figure>
**P-values for sampled Kolmogorov-Smirnov test **

|                     | journalist | politician | random-follower | random-friend |
| ------------------: | ---------: | ---------: | --------------: | ------------: |
|      **journalist** |   0.013974 |   0.275131 |        0.117046 |      0.060879 |
|      **politician** |   0.274419 |   0.041206 |        0.184481 |      0.257700 |
| **random-follower** |   0.118161 |   0.185019 |        0.008606 |      0.078555 |
|   **random-friend** |   0.060738 |   0.259250 |        0.078369 |      0.008491 |

### Reciprocity

- Description

<figure style="text-align:center">
    <iframe height='520' scrolling='no' src='../tfm-plots/networks-ego-reciprocity-type.html' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 99.99%;'>	</iframe>
    <figcaption>Fig.2 - Ego reciprocity by type.</figcaption>
</figure>
**P-values for sampled Kolmogorov-Smirnov test**

|            id_2 | journalist | politician | random-follower | random-friend |
| --------------: | ---------: | ---------: | --------------: | ------------: |
|      journalist |   0.010489 |   0.105550 |        0.040881 |      0.105750 |
|      politician |   0.103113 |   0.034175 |        0.132675 |      0.157906 |
| random-follower |   0.040887 |   0.130812 |        0.006023 |      0.125938 |
|   random-friend |   0.105946 |   0.157087 |        0.125920 |      0.007257 |

### Connections between outliers

- Description

<figure style="text-align:center">
    <iframe height='520' scrolling='no' src='../tfm-plots/networks-outlier-connectedness.html' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 99.99%;'>	</iframe>
    <figcaption>Fig.3 - Connections between outliers.</figcaption>
</figure>
**P-values for sampled Kolmogorov-Smirnov test **

|                     | journalist | politician | random-follower | random-friend |
| ------------------: | ---------: | ---------: | --------------: | ------------: |
|      **journalist** |   0.016117 |   0.469709 |        0.121097 |      0.059129 |
|      **politician** |   0.469169 |   0.048047 |        0.558213 |      0.488959 |
| **random-follower** |   0.120751 |   0.559362 |        0.009477 |      0.076149 |
|   **random-friend** |   0.059404 |   0.488519 |        0.076078 |      0.009497 |

### Ego clustering

- Description

<figure style="text-align:center">
    <iframe height='520' scrolling='no' src='../tfm-plots/networks-ego-clustering-type.html' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 99.99%;'>	</iframe>
    <figcaption>Fig.4 - Clustering score for ego-node.</figcaption>
</figure>

**P-values for sampled Kolmogorov-Smirnov test **

|                     | journalist | politician | random-follower | random-friend |
| ------------------: | ---------: | ---------: | --------------: | ------------: |
|      **journalist** |   0.014539 |   0.580375 |        0.110850 |      0.087493 |
|      **politician** |   0.579250 |   0.049219 |        0.664144 |      0.630919 |
| **random-follower** |   0.111391 |   0.664238 |        0.008437 |      0.036767 |
|   **random-friend** |   0.085648 |   0.631700 |        0.036911 |      0.008309 |

## Evolving network

In this section we'll measure the changes in the ego-network as the activity changes. We'll split the timeline of the user into the chunks we found in the linear breakpoints section in order to have some stationarity in the data. We'll then compute where is the outlier frontier for this chunk in percentage of the total retweeted amount. Then we'll input this percentage week by week during the breakpoints, we'll get a sense of stability of the network given given the level of activity. We'll do this only for an example to see if this is a good way to measure the ego-network stability.

<figure style="text-align:center">
    <iframe height='320' scrolling='no' src='../tfm-plots/networks-jaccard-corrected-total.html' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 99.99%;'>	</iframe>
    <figcaption>Fig.5 - Clustering score for ego-node.</figcaption>
</figure>
<figure style="text-align:center">
    <iframe height='435' scrolling='no' src='../tfm-plots/networks-jaccard-corrected-types.html' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 99.99%;'>	</iframe>
    <figcaption>Fig.6 - Clustering score for ego-node.</figcaption>
</figure>


<figure style="text-align:center">
    <iframe height='520' scrolling='no' src='../tfm-plots/networks-count-outlier-corrected.html' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 99.99%;'>	</iframe>
    <figcaption>Fig.6 - Clustering score for ego-node.</figcaption>
</figure>



<figure style="text-align:center">
    <iframe height='820' scrolling='no' src='../tfm-plots/networks-count-outlier-corrected-types.html' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 99.99%;'>	</iframe>
    <figcaption>Fig.7 - Clustering score for ego-node.</figcaption>
</figure>

An adjusted boxplot for skewed distributions, M. Huberta,∗ , E. Vandervierenb

## References

<a name="ref1">**[ 1 ]**</a>: Valerio Arnaboldi, Andrea Passarella, Marco Conti, Robin Dunbar. *Structure of Ego-Alter Relationships of Politicians in Twitter*. https://doi.org/10.1111/jcc4.12193 (https://academic.oup.com/jcmc/article/22/5/231/4666424)

<a name="ref2">**[ 2 ]**</a>: M. Hubert, E. Vandervieren. *An adjusted boxplot for skewed distributions*, Computational Statistics & Data Analysis, Volume 52, Issue 12, 2008, Pages 5186-5201, ISSN 0167-9473. https://doi.org/10.1016/j.csda.2007.11.008. (http://www.sciencedirect.com/science/article/pii/S0167947307004434)

<a name="ref2">**[ 3 ]**</a>: Valerio Arnaboldi, Marco Conti, Andrea Passarella, Robin Dunbar. *Online Social Networks and information diffusion: The role of ego networks*, Online Social Networks and Media, Volume 1, 2017, Pages 44-55, ISSN 2468-6964, https://doi.org/10.1016/j.osnem.2017.04.001 (http://www.sciencedirect.com/science/article/pii/S2468696417300150)

